webpackJsonp([1],{"7zck":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),r=n("mvHQ"),s=n.n(r),o=n("2R8v"),i=n.n(o),c=n("tlQw"),u=n.n(c),l=i()(["\n                query {\n                getRoom {\n                    users {\n                    id,\n                    name,\n                    color\n                    }\n                    chats {\n                    user,\n                    date,\n                    message\n                    }\n                }\n                }"],["\n                query {\n                getRoom {\n                    users {\n                    id,\n                    name,\n                    color\n                    }\n                    chats {\n                    user,\n                    date,\n                    message\n                    }\n                }\n                }"]),d=i()(["\n                    subscription {\n                        newState {\n                        users {\n                            id,\n                            name,\n                            color\n                        },\n                        chats {\n                            user,\n                            message,\n                            date\n                        }\n                        }\n                    }"],["\n                    subscription {\n                        newState {\n                        users {\n                            id,\n                            name,\n                            color\n                        },\n                        chats {\n                            user,\n                            message,\n                            date\n                        }\n                        }\n                    }"]),p=i()(["mutation {\n                    createUser {\n                        name,\n                        id,\n                        color\n                    }\n                }"],["mutation {\n                    createUser {\n                        name,\n                        id,\n                        color\n                    }\n                }"]),h={data:function(){return{clipped:!1,drawer:!0,fixed:!1,items:[{title:"USERS"}],miniVariant:!1,right:!0,rightDrawer:!1,title:"Super Awesome Chat Application V2",getRoom:{},user:{}}},name:"App",apollo:{getRoom:{query:u()(l),subscribeToMore:{document:u()(d),updateQuery:function(t,e){return{getRoom:e.subscriptionData.data.newState}}}}},computed:{users:function(){return this.getRoom.users},chats:function(){return this.getRoom}},methods:{userChanged:function(t){this.user=t}},mounted:function(){var t=this;localStorage.user?this.user=JSON.parse(localStorage.user):this.$apollo.mutate({mutation:u()(p)}).then(function(e){localStorage.user=s()(e.data.createUser),t.user=e.data.createUser})}},m={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-navigation-drawer",{attrs:{persistent:"","mini-variant":t.miniVariant,clipped:t.clipped,"enable-resize-watcher":"",fixed:"",app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[n("v-list",t._l(t.users,function(e,a){return n("v-list-tile",{key:a,attrs:{value:"true"}},[n("v-list-tile-content",[n("v-list-tile-title",{domProps:{textContent:t._s(e.name)}})],1)],1)}))],1),t._v(" "),n("v-toolbar",{attrs:{app:"","clipped-left":t.clipped}},[n("v-toolbar-side-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),t._v(" "),n("v-toolbar-title",{domProps:{textContent:t._s(t.title+" chatting as "+t.user.name)}})],1),t._v(" "),n("v-content",[n("chat",{attrs:{chats:t.chats,user:t.user},on:{userChanged:t.userChanged}})],1)],1)},staticRenderFns:[]},v=n("VU/8")(h,m,!1,null,null,null).exports,f=n("/ocq"),g=i()(['mutation {\n            updateUser(id:"','", name:"','", color:"','") {\n                id,\n                name,\n                color\n            }\n        }'],['mutation {\n            updateUser(id:"','", name:"','", color:"','") {\n                id,\n                name,\n                color\n            }\n        }']),x=i()(['mutation {\n            createChat(id:"','", text:"','") {\n                user,\n                message,\n                date\n            }\n          }'],['mutation {\n            createChat(id:"','", text:"','") {\n                user,\n                message,\n                date\n            }\n          }']),w={data:function(){return{chatText:""}},props:{chats:{},user:{}},methods:{sendChat:function(){var t=this,e=this.chatText;this.chatText="";var n=/\/nick [a-zA-Z0-9]+/gi.exec(e),a=/\/nickcolor [a-z]+/gi.exec(e);if(n){var r=n[0].replace("/nick ","");this.$apollo.mutate({mutation:u()(g,this.user.id,r,this.user.color)}).then(function(e){t.$emit("userChanged",e.data.updateUser),localStorage.user=s()(e.data.updateUser)}).catch(function(t){return console.log(t)})}else if(a){var o=a[0].replace("/nickcolor ","");this.$apollo.mutate({mutation:u()(g,this.user.id,this.user.name,o)}).then(function(e){t.$emit("userChanged",e.data.updateUser),localStorage.user=s()(e.data.updateUser)})}else this.$apollo.mutate({mutation:u()(x,this.user.id,e)})},findName:function(t){return this.chats.users.find(function(e){return e.id===t}).name},findColor:function(t){return this.chats.users.find(function(e){return e.id===t}).color}}},b={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticStyle:{height:"calc(100vh - 64px)"},attrs:{"grid-list-xs":"",fluid:"","fill-height":"true"}},[n("v-layout",{attrs:{column:""}},[n("v-container",{staticStyle:{"overflow-y":"scroll"},attrs:{"vue-chat-scroll":"","grid-list-xs":""}},[n("v-layout",{attrs:{column:""}},[n("v-list",t._l(t.chats.chats,function(e,a){return n("v-list-tile",{key:a,attrs:{value:"true"}},[n("v-list-tile-content",[n("v-list-tile-title",{class:t.findColor(e.user)+"--text",domProps:{textContent:t._s(t.findName(e.user))}}),t._v(" "),n("v-list-tile-sub-title",{domProps:{innerHTML:t._s("<span class='text--primary'>"+e.message+"</span> &mdash; "+e.date)}})],1)],1)}))],1)],1),t._v(" "),n("v-toolbar",{attrs:{color:"grey lighten-2"}},[n("v-text-field",{staticClass:"chat-textbox",attrs:{light:"",counter:"200",maxlength:"200",placeholder:"Say something...",clearable:""},model:{value:t.chatText,callback:function(e){t.chatText=e},expression:"chatText"}}),t._v(" "),n("v-btn",{attrs:{icon:"",small:""},on:{click:t.sendChat}},[n("v-icon",{attrs:{color:"grey"}},[t._v("send")])],1)],1)],1)],1)},staticRenderFns:[]};var y=n("VU/8")(w,b,!1,function(t){n("QyLB")},"data-v-1c358e40",null).exports;a.a.use(f.a);var _=new f.a({routes:[{path:"/",name:"Chat",component:y}]}),C=n("3EgV"),k=n.n(C),S=(n("7zck"),n("u1/p")),U=n("rp1p"),R=n("+dIz"),T=n("uekS"),$=n("Z6Fn"),z=n("+zi7"),A=n("69U5"),N=n("bNL2"),P=n.n(N),V=new U.a({uri:"http://localhost:1337/api"}),q=new $.a({uri:"ws://localhost:1337/api",options:{reconnect:!0}}),O=Object(T.e)(function(t){var e=t.query,n=Object(z.i)(e),a=n.kind,r=n.operation;return"OperationDefinition"===a&&"subscription"===r},q,V),Q=new S.a({link:O,cache:new R.a,connectToDevTools:!0});a.a.use(k.a),a.a.use(A.a),a.a.use(P.a);var D=new A.a({defaultClient:Q});a.a.config.productionTip=!1,a.a.component("chat",y),new a.a({el:"#app",router:_,components:{App:v},provide:D.provide(),template:"<App/>"})},QyLB:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.93cbb8559581a1b3b076.js.map